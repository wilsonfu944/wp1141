# 商品瀏覽頁面功能說明

## ✨ 新增功能概覽

本次更新為商品瀏覽頁面添加了豐富的篩選、搜尋、排序和比較功能，提供更完善的購物體驗。

---

## 1. 📁 篩選側邊欄（FilterSidebar）

### 功能特色
完整的側邊欄篩選系統，支援多維度商品篩選。

### 篩選選項

#### 📂 商品分類
- **類型**：單選
- **選項**：所有分類、電子產品、服飾配件、家居生活、美妝保養、圖書文具
- **UI 組件**：Radio.Group
- **特點**：一次只能選擇一個分類

#### 💰 價格範圍
- **類型**：雙向滑桿
- **範圍**：自動根據商品價格計算最小值和最大值
- **步進**：NT$ 100
- **UI 組件**：Slider（range 模式）
- **特點**：
  - 實時顯示當前選擇的價格範圍
  - Tooltip 顯示拖動時的價格
  - 自動對齊到 100 元整數倍

#### ⭐ 評分篩選
- **類型**：星等選擇
- **範圍**：0-5 星
- **UI 組件**：Rate
- **特點**：
  - 點擊星星設定最低評分要求
  - 支援清除（顯示所有評分商品）
  - 顯示「X 星以上」提示文字

#### 🏷️ 品牌篩選
- **類型**：多選
- **UI 組件**：Checkbox.Group
- **特點**：
  - 可同時選擇多個品牌
  - 顯示前 10 個品牌（依字母排序）
  - 垂直捲動條瀏覽更多品牌
  - 自訂捲動條樣式

#### 📦 庫存狀態
- **類型**：單一勾選框
- **UI 組件**：Checkbox
- **功能**：勾選後僅顯示有庫存商品
- **特點**：快速過濾缺貨商品

### 操作按鈕
- **重置按鈕**：一鍵清除所有篩選條件
- **位置**：側邊欄標題右側
- **圖標**：ClearOutlined

### 響應式設計
- **桌面（> 992px）**：固定顯示，280px 寬度
- **平板/手機（≤ 991px）**：可收合側邊欄，浮動顯示
- **特點**：
  - 側邊欄吸頂設計（sticky top: 80px）
  - 自動適應螢幕大小
  - 滾動時保持可見

---

## 2. 🔍 搜尋功能

### 搜尋範圍
支援以下欄位的全文搜尋：
- 商品名稱
- 商品描述
- 品牌名稱

### UI 組件
- **類型**：Input.Search（大尺寸）
- **最大寬度**：500px
- **功能**：
  - Enter 鍵搜尋
  - 點擊搜尋按鈕
  - 一鍵清除（allowClear）
  - 搜尋圖標按鈕

### 搜尋體驗
- 實時輸入，按下搜尋才執行
- 支援中英文搜尋
- 大小寫不敏感
- 自動 trim 空白

---

## 3. 🔄 排序功能

### 排序選項

| 選項 | 說明 | 排序邏輯 |
|------|------|----------|
| 預設排序 | 不排序，保持原始順序 | 無 |
| 價格：低到高 | 依價格升序 | price ASC |
| 價格：高到低 | 依價格降序 | price DESC |
| 名稱排序 | 依商品名稱字母順序 | name ASC |
| 評分排序 | 依評分降序 | rating DESC |
| 新品優先 | 依建立日期降序 | created_date DESC |

### UI 組件
- **類型**：Select（大尺寸）
- **寬度**：180px
- **位置**：工具列右側

---

## 4. 🔄 商品比較功能

### 功能概述
允許使用者同時比較最多 3 個商品的詳細規格。

### 選擇商品比較

#### 商品卡片上的操作
- **比較勾選框**：
  - 位置：商品圖片左下角
  - 樣式：白色半透明背景
  - 限制：最多選擇 3 個商品
  - 提示：達到上限時顯示 Tooltip

- **視覺回饋**：
  - 選中的商品卡片有藍色邊框
  - 卡片陰影增強（藍色光暈）
  - 勾選框背景變化

### 比較彈窗（ProductCompare）

#### 開啟方式
1. 工具列「商品比較」按鈕（顯示已選數量徽章）
2. 浮動按鈕（移動端，右下角）

#### 比較表格

| 屬性 | 說明 |
|------|------|
| 商品圖片 | 150x150px，含移除按鈕 |
| 商品名稱 | 粗體顯示 |
| 品牌 | 金色標籤 |
| 分類 | 藍色標籤 |
| 價格 | 紅色大字，格式化顯示 |
| 評分 | 星星評分 |
| 庫存 | 綠色/紅色標籤 |
| 特徵 | 所有特徵標籤 |
| 描述 | 完整描述，可滾動 |
| 操作 | 加入購物車按鈕 |

#### UI 特點
- **寬度**：90%，最大 1200px
- **高度**：最大 70vh，可滾動
- **表格**：固定第一列（屬性名稱）
- **響應式**：橫向滾動查看更多商品

#### 操作功能
- **移除商品**：點擊商品圖片下方的移除按鈕
- **加入購物車**：直接從比較表格加入商品
- **關閉彈窗**：點擊右上角關閉或彈窗外區域

---

## 5. 📱 快速預覽功能

### 觸發方式
點擊商品卡片右下角的眼睛圖標

### 功能
- 展開/收起完整商品描述
- 不需開啟獨立頁面
- 即時切換狀態

### UI 效果
- **正常狀態**：白色圓形按鈕
- **懸停狀態**：藍色背景，放大 1.1 倍
- **展開時**：描述文字完整顯示，顯示「收起」按鈕

---

## 6. 📊 商品列表布局

### 網格響應式設計

| 螢幕尺寸 | 每列商品數 | 斷點 |
|----------|-----------|------|
| 手機（xs） | 1 列 | < 576px |
| 平板（sm） | 2 列 | 576px - 768px |
| 平板（md） | 2 列 | 768px - 992px |
| 桌面（lg） | 3 列 | 992px - 1200px |
| 大桌面（xl） | 4 列 | > 1200px |

### 間距設計
- **水平間距**：16px
- **垂直間距**：16px
- **外邊距**：24px（桌面）、16px（移動端）

---

## 7. 🎯 工具列（Toolbar）

### 位置
商品列表上方，獨立的白色卡片區域

### 元件配置

#### 左側
- **搜尋框**：Input.Search，最大寬度 500px

#### 右側
- **排序選擇器**：Select，180px 寬度
- **商品比較按鈕**：
  - 僅在選擇商品時顯示
  - 顯示已選數量徽章
  - 主要按鈕樣式

### 響應式
- **桌面**：水平排列，兩端對齊
- **移動端**：垂直堆疊，自動換行

---

## 8. 📈 結果統計

### 顯示資訊
- **商品數量**：「共找到 X 個商品」
  - 數字以藍色粗體顯示
  - 動態更新
  
- **比較狀態**：「已選擇 X/3 個商品進行比較」
  - 綠色文字
  - 僅在選擇商品時顯示

### 位置
工具列下方，獨立的白色卡片區域

---

## 9. 🎨 視覺設計

### 配色方案
- **主色**：#1890ff（藍色）
- **成功色**：#52c41a（綠色）
- **警告色**：#ff4d4f（紅色）
- **背景色**：#f0f2f5（淺灰）

### 卡片樣式
- **圓角**：8px
- **陰影**：0 1px 4px rgba(0, 0, 0, 0.08)
- **懸停效果**：
  - 陰影加深
  - 輕微上移（-4px）
  - 0.3s 過渡動畫

### 字體大小
- **標題**：20px（產品名稱）
- **價格**：18-20px（紅色粗體）
- **正文**：14px
- **次要文字**：12-13px

---

## 10. 🎮 互動體驗

### 即時回饋
- **篩選**：立即更新商品列表
- **搜尋**：按下搜尋鍵後執行
- **排序**：即時重新排列
- **比較**：勾選即時更新徽章

### 載入狀態
- **初始載入**：大型 Spin 組件，顯示「載入商品中...」
- **位置**：頁面中央
- **動畫**：Ant Design 預設 loading 動畫

### 空狀態
- **無商品**：Empty 組件
- **訊息**：「找不到符合條件的商品」
- **建議**：調整篩選條件或重置篩選

### 錯誤處理
- **載入失敗**：Alert 組件
- **類型**：error
- **顯示**：錯誤訊息描述
- **圖標**：錯誤圖標

---

## 11. 🚀 浮動按鈕

### 回到頂部
- **圖標**：UpOutlined
- **位置**：右下角
- **觸發**：滾動一定距離後顯示
- **動作**：平滑滾動到頁面頂部

### 商品比較（移動端）
- **圖標**：SwapOutlined
- **位置**：右下角，回到頂部按鈕上方
- **徽章**：顯示已選數量
- **條件**：僅在選擇商品時顯示
- **類型**：主要按鈕（藍色）

---

## 12. 🔧 技術實作

### 狀態管理
```typescript
// 本地狀態
const [compareProducts, setCompareProducts] = useState<Product[]>([]);
const [compareModalVisible, setCompareModalVisible] = useState(false);
const [searchValue, setSearchValue] = useState('');
const [sidebarCollapsed, setSidebarCollapsed] = useState(false);

// Context 狀態
const { filteredProducts, loading, error, updateFilterOptions } = useProductContext();
```

### 篩選邏輯
```typescript
// ProductContext 中的篩選順序
1. 分類篩選
2. 關鍵字搜尋
3. 價格範圍
4. 品牌篩選
5. 評分篩選
6. 庫存狀態
7. 排序
```

### 效能優化
- **useMemo**：篩選結果、分類列表、品牌列表
- **useCallback**：事件處理函數
- **React.memo**：商品卡片組件（未實作，建議使用）

---

## 13. 📱 響應式設計總結

### 桌面（> 992px）
- 側邊欄固定顯示（280px）
- 商品 4 列網格
- 工具列水平排列
- 所有功能完整顯示

### 平板（768px - 992px）
- 側邊欄可收合
- 商品 2 列網格
- 工具列可能換行

### 手機（< 768px）
- 側邊欄浮動顯示
- 商品單列顯示
- 工具列垂直堆疊
- 使用浮動按鈕替代部分功能

---

## 14. 🎯 使用流程範例

### 典型購物流程

1. **進入頁面**
   - 查看所有商品（100 筆）
   - 快速瀏覽分類

2. **篩選商品**
   - 選擇分類：電子產品
   - 設定價格：10,000 - 50,000
   - 設定評分：4 星以上
   - 選擇品牌：Apple、Samsung

3. **搜尋具體商品**
   - 輸入關鍵字：「iPhone」
   - 結果縮小到相關商品

4. **排序瀏覽**
   - 按價格從低到高排序
   - 找到合適的商品

5. **比較選擇**
   - 勾選 3 個商品進行比較
   - 開啟比較彈窗
   - 查看詳細規格對照

6. **加入購物車**
   - 決定購買某個商品
   - 從比較彈窗或商品卡片加入購物車
   - 設定購買數量

7. **繼續購物或結帳**
   - 查看購物車
   - 前往結帳頁面

---

## 15. ⚡ 效能考量

### 載入優化
- CSV 檔案一次性載入
- 使用 useMemo 快取計算結果
- 避免不必要的重新渲染

### 篩選效能
- 所有篩選在前端執行
- 使用 Array.filter 高效篩選
- 組合多個篩選條件

### 比較功能
- 最多 3 個商品，避免效能問題
- 使用 Modal 延遲渲染

---

## 16. 🔮 未來擴展建議

### 可能的改進
- [ ] 篩選條件書籤（儲存常用篩選）
- [ ] 商品收藏功能
- [ ] 價格走勢圖表
- [ ] 更多排序選項（銷量、優惠力度）
- [ ] 篩選歷史記錄
- [ ] 商品推薦演算法
- [ ] 無限滾動載入
- [ ] 虛擬列表優化（大量商品）

---

**文檔版本**：v1.0  
**最後更新**：2025-10-11  
**作者**：WP1141 HW3


